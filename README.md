# Bibliofil header

This module represents a configuration builder for `bibliofil-config` (https://github.com/inleadmedia/bibliofil-config)
project.

Once enabled and configured, a script tag will be added into the site's markup which will load custom header:

`<script data-main="http://storage.easyting.dk/bibliofil/config/src/config.js?consumer_config=<bibliofil_instance_url>/sites/default/files/bibliofil-header/bibliofil-header.js" src="http://storage.easyting.dk/bibliofil/config/require.min.js"></script>`

**!!! Note:** Same string should be placed on the OPAC instance.

The `<bibliofil_instance_url>/sites/default/files/bibliofil-header/bibliofil-header.js` file will be automatically
created/updated on theme settings form submit.

On module enable, the "Bibliofil" theme settings form will be extended with "Bibliofil header" section.
Also, when module is enabled, new menu "Bibliofil header" will be created where should be stored menu links which will
be displayed in the custom header.

Options and functions generated by this module are described great in https://github.com/inleadmedia/bibliofil-header#object-lightweightheaderobject-options.

## Installation:
Installation process is the same as for other drupal modules, so go to `@/admin/modules` page, find "Bibliofil header"
module, check enable switch and push "Save configuration" button.

## Configuration:
Once enabled, this module extends the "Bibliofil" theme settings form. The new "Bibliofil header" section will be added
before the standard theme settings.

Bibliofil header section contains next groups:
- General settings - Contains settings related to communication with external libraries and other stuff like app skin,
  client, etc.
- Logos - allows uploading of static and floating logo images used in header.
- Actions - lists the settings of action buttons displayed on the right side of custom header. This represents a set of
  sections containing uid, icon, title, href fields and also here can be inserted functions which are called `onClick`
  and `onMount` methods call.
  - Actions snippets:
    - "Search" action onClick:
      `if (isFrontPage) {
        options.getInstance()._searchInputEl.focus();
       } else {
        options.getInstance().toggleSearch();
       }`

    - "Search" action `onMount`:
        `if (!isFrontPage) {
          const lightweightHeader = new options.prebuiltDependencies.LightweightHeader();
          lightweightHeader.on("search:open", function () {
            lightweightHeader.updateByUID("search", {
              attrs: {
                class: "lightweight-header--active"
              }
            });
          });
          lightweightHeader.on("search:close", function () {
            lightweightHeader.updateByUID("search", {
              attrs: { class: "" }
            });
          });
        }
        `
- Search settings - this section contains settings related to search box display and functionality. Here can be
  configured the way how the search box is displayed (inline/foldable/auto), icon shown on the left side of widget, widget's
  placeholder, icon and text appearing on close button. Also, here is realized control of suggestion functionality so you
  can select the layout of suggestions, configure display style and enable or disable needed suggesters.

#### Menu items:
Control of menu items displayed in the custom header is done from native drupal menu system. On module installation, an
`Bibliofil header` menu (`@/admin/structure/menu/manage/bibliofil-header-menu`) will be created and this must contain
links which will be displayed in the header.
All control of menu items is done as usual from drupal interface.
